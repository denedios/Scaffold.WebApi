# Structured Logging #

Scaffold.WebApi uses the [Serilog](https://serilog.net) Logging Provider for structured logging. Before you can actually get structured logs, you'll need to configure a *sink* that can support structured logging. Serilog can be configured by modifying [Program.cs](../Sources/Scaffold.WebApi/Program.cs).

## Request Logging ##

Included in Scaffold.WebApi is a [Request Logging Middleware](../Sources/Scaffold.WebApi/Middleware/RequestLoggingMiddleware.cs) that does the following;

1. Defines the log scope and logging context for log events.
2. Logs every request.
3. Catches and logs unhandled exceptions.

The following is an example of a log entry generated by the Request Logging Middleware when using a sink that supports the JSON formatter.

```json
{
    "Timestamp": "2019-03-03T13:47:59.2255020+11:00",
    "Level": "Information",
    "MessageTemplate": "HTTP GET /health responded with 200 in 7 ms",
    "Properties": {
        "SourceContext": "Scaffold.WebApi.Middleware.RequestLoggingMiddleware",
        "RequestId": "0HLKVG9OPI092:00000009",
        "RequestPath": "/health",
        "CorrelationId": "0HLKVG9OPI092:00000009",
        "ConnectionId": "0HLKVG9OPI092",
        "HttpConnection": {
            "RemoteIpAddress": "::1",
            "LocalIpAddress": "::1"
        },
        "HttpRequest": {
            "Method": "GET",
            "Scheme": "http",
            "Host": "localhost:5000",
            "Path": "/health",
            "Headers": {
                "Cache-Control": "no-cache",
                "Connection": "keep-alive",
                "Accept": "*/*",
                "Accept-Encoding": "gzip, deflate",
                "Host": "localhost:5000",
                "User-Agent": "PostmanRuntime/7.6.0",
                "Postman-Token": "4f86680f-3624-4b25-8795-e270540eed51"
            }
        },
        "HttpResponse": {
            "StatusCode": 200,
            "ElapsedMilliseconds": 7
        },
        "Application": "Scaffold.WebApi",
        "Environment": "Development"
    }
}
```
